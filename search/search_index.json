{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"Markdownfiles/","title":"Giswater Custom Documentation","text":"<p>Welcome to the Giswater Custom Documentation, an optimized and tailored guide for your organization's use of Giswater. Fast, dynamic, and built to adapt to your needs, this documentation is structured to give you the best experience while navigating your Giswater functions.</p> \ud83d\ude80 Ultra-fast &amp; Efficient <p>Our Giswater implementation ensures quick data processing, with optimized workflows for both small and large datasets.</p> \ud83c\udf0d Multi-platform Integration <p>Seamless integration with multiple platforms and data sources, allowing you to unify your GIS ecosystem effortlessly.</p> \ud83d\udd27 Customizable Features <p>Every function and tool can be customized to fit your specific operational needs, ensuring flexibility and control.</p>"},{"location":"Markdownfiles/#get-started","title":"Get Started","text":"<p>Explore the navigation on the left to dive into the various sections, including:</p> <ul> <li>General Functions: Learn about the core features of Giswater.</li> <li>Customer-Specific Functions: Discover the unique functionalities that have been activated for your organization.</li> <li>API Documentation: Integrate Giswater with your other tools using our powerful API.</li> </ul> Get Started"},{"location":"Markdownfiles/#why-giswater","title":"Why Giswater?","text":"<ul> <li>Speed: Built with efficiency in mind.</li> <li>Scalability: Designed to scale with your operations.</li> <li>Customization: Completely adaptable to your organization's needs.</li> <li>Support: Get help from our dedicated support team whenever you need it.</li> </ul>"},{"location":"Markdownfiles/installation/Basic_work_rules/","title":"Basic Work Rules","text":"<p>Once the software installation, the necessary configuration and the creation of data schemas and projects have been completed, the user must become familiar with the basic rules of working with Giswater. Apart from those already mentioned in the previous sections, which were indispensables for preparation process now it is time to make an approximation of the tool operation, its characteristics, and capabilities, with special emphasis on the rules of how to work with the data in a safe way.</p> <p>One of the main advantages of working combining a database with GIS is the great capacity that can be acquired in terms of robustness of the data thanks to the existence of primary and foreign keys, topological rules, or the possibility of managing the data edition.</p> <p>In this section the main rules and knowledge, which need to be considered while working with Giswater, will be presented.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#31-project-types","title":"3.1 Project types","text":"<p>There are two vastly different types of projects in the world of Giswater, which have great similarities in terms of the structuring and categorization of data, but which at the same time should not be confused by the user. It\u2019s always important to know if you are working on:</p> <ul> <li>Water Supply (WS)</li> </ul> <p>Project related to the drinking water supply network of a territory. The data represents all the elements that are necessary for this type of network, starting with the pipes (arc elements) and following with the valves (node elements), that are found along the network among many other elements. Giswater aims to represent as accurately as possible the reality of a water supply system, so it covers all possibilities that may occur in the system.</p> <p>Specifically, for WS, the main tools are used to regulate and manage water flows, pressures or planning of supply to customers based on the moment. In relation to this, there are sets of tables that allow the monitoring of the flows thanks to SCADA systems or the management of real visits to the elements of the network.</p> <ul> <li>Urban Drainage (UD)</li> </ul> <p>Project related to the sanitation and drainage network of urban waters in a territory. As in WS projects, the aim is to represent the network in the most realistic way possible. Here the main elements are the conduits in which the wastewater circulates. There are elements that coincide with the water supply projects, but most of them are characteristic only for drainage networks, such as the gullies or the sewage treatment plants.</p> <p>Some of the most prominent tools of this type of project are related to the direction of wastewater circulation, either upstream or downstream. In this sense, Giswater allows to represent a profile of the conduits with relevant information about them.</p> <p>This guide is unique for both types of project, although individualized manuals for each of them could perfectly exist. It has been worked to unify it to have all the information of Giswater in a single document, but the intention is that within this manual the user can quickly differentiate if the content of a section is specific to a WS project, a UD project or a common section.</p> <p>To accomplish this goal, all sections of the document that are specific to a project type will be marked with a color: blue for WS and yellow for UD. All the sections presented so far have been common, but from now on the big differences between projects will be shown.</p> <p>The following table compares some of the highlights of both types of projects:</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#32-available-elements","title":"3.2 Available elements","text":"<p>One of the most attractive and representative characteristics of Giswater is the large number of elements that can be represented in the work environment, a fact that allows a very adjusted representation of reality and that the user can satisfy all its needs in respect of the conditions of the network it manages.</p> <p>In this section, the functionality of the main existing elements, which are visually represented in the following image, will be developed. Most of the elements are represented here, although later we will see that there are more.</p> <p>Schematic representation of different elements in Giswater.</p> <ul> <li>Node</li> </ul> <p>One of the main element types of the network. It is always governed by topological rules. The node-type elements have been divided into a multitude of categories, differentiated for WS and UD projects. They are always represented as points, although some may have associated polygons that represent their real perimeter when needed.</p> <p>Nodes are always placed between two arcs; therefore, they break these arcs in different entities. Most of the elements perform specific functions to break (such as flow reductions or check valves), although there are nodes that would not normally break arcs, in some special cases they must perform this function. They are the ones represented in image from above:</p> <ul> <li>Netwjoin: is a water connection (connec) that by its dimensions or other characteristics is a part of the network and is located on top of an arc.</li> <li>Netgully: is a gully that by its dimensions or other characteristics is a part of the network and is located on top of an arc.</li> <li>Netelement: is any element that does not usually connect to the network but due to its characteristics must be placed on top of an arc and cut it.</li> <li>Arc</li> </ul> <p>Arcs, together with nodes, are the main elements of the network. They are located between two nodes and represent the conduits and pipes of the network. There are not as many types of arcs as there are of nodes, although they are also categorized and all their characteristics (such as diameter, material, roughness...) can be added in their attribute table to differentiate them better.</p> <p>In the image from above, the functioning of a Varc (virtual arcs) is presented. They connect the network topologically between arcs and nodes when in reality an arc reaches a polygon and therefore does not really exist inside it as an arc. This is necessary for the topology rules to work correctly in the Giswater network. They are usually short stretches.</p> <ul> <li>Connec</li> </ul> <p>Connections, the elements that connect the network with buildings or other elements such as fountains. They are point elements, although to link the connections with the rest of the network, links and virtual nodes are used.</p> <ul> <li>Gully</li> </ul> <p>Gullies that are not placed on top of the arcs but are located at a certain distance from the network. Most are of this type; the rest are the netgully and are represented as nodes. They are also specific elements and, like connections, can be related to the network through links and virtual nodes.</p> <ul> <li>Vnode</li> </ul> <p>Virtual nodes are nodes which, like the virtual arcs, do not exist but must exist in the Giswater network so that it works correctly. Virtual nodes are always placed on top of arcs, but, unlike the nodes, they never divide the arcs into two parts.</p> <p>The function of these elements is to place the gullies and connections that are at a certain distance above the network. These are specific elements that, as mentioned, are represented above the arc closest to the element referred to by the virtual node.</p> <ul> <li>Link</li> </ul> <p>Links are linear elements that relate gullies and connections with their virtual nodes located over the nearest arc, therefore, they perform the function of connecting the separated elements with the network.</p> <ul> <li>Element</li> </ul> <p>This category is available for other types of point elements not connected to the network, which the user can customize himself. It can be network accessories or any other element that is necessary for a representation with the highest possible degree of reality.</p> <p>In addition to all these main elements, there are some other elements that do not have any topology but are interesting to visualize on the map:</p> <ul> <li>Address: within this group there are all those elements related to the representation of the territory of the network. Normally there are the layers of street axis, municipal limit, perimeter of buildings and portals.</li> <li>Dimensions: finally, we must mention the layer that represents the dimensions. This will only be filled in when the user uses the specific tool to measure distances between elements. They serve as a complement to the network to be able to see in detail the dimensions created.</li> </ul>"},{"location":"Markdownfiles/installation/Basic_work_rules/#33-general-conditions-of-working-with-database","title":"3.3 General conditions of working with database","text":"<p>To work correctly with databases that contain a big amount of information, a series of basic rules must be followed so that the data has consistency, and the usability of the database could be maximized.</p> <p>Most of these rules have to do with the relationships between tables, which, as we will see more ahead, share many columns and fields. In relation to this we must consider foreign keys that allow the information of one table to be a part of another table.</p> <p>In addition, it is also essential to understand the functionality of primary keys, the columns that restrict the repetition of fields.</p> <p>Creation script of a table sector with references of primary and foreign key.</p> <p>If we check the script image above, it represents the creation script of the sector table, the primary key of the table is sector_id, which means that the content of this column can not be repeated in any case. This table also has a foreign key, which refers to macrosector table and specifically to the macrosector_id field. What does this mean? That the content of the macrosector_id field of this sector table must exist before in the same field of the macrosector table. For example, if in the macrosector_id column of the macrosector table we only have data 1 and 2, to fill the same column in the sector table we can only choose one of these two numbers.</p> <p>This makes the relationships between tables narrow and many fields have restrictions when adding information for it to be correct. Besides the use of keys, in some tables there are also restrictions of the check type, which limit the possibility of adding data in certain fields only with the established values. The check restrictions are only found where is necessary, since they are tables that require specific values for the system to work correctly and therefore can not be modified.</p> <p>As already mentioned in section 2.5.1.1, the use of hierarchical catalogs to categorize the elements is very important and this functionality can only be developed through the use of foreign keys. To add elements in a catalog, they must always be related to some type of higher hierarchy element.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#34-map-zones","title":"3.4 Map zones","text":"<p>To know how far the water supply and drainage networks reach, Giswater establishes different types of zones that limit the territories of which they are part. Each of these zones has specific characteristics and there are certain relationships between them, managed, as seen in the previous section, with foreign keys.</p> <p>The following Image  allows to understand the role of each zone and with which elements of the network are related to.</p> <p>SUPPLY MAP ZONES</p> <p>SANITATION MAP ZONES</p> <p>Representative diagram of the different areas of the map and the elements that may belong to them.</p> <p>The main zones are Sector and Exploitation, which serve as heads of the rest of the zones on the map, each one within its activity. The sectors are delimited with the sole condition of hydraulic coherence and may have great differences in their extension. A single sector can, for example, represent a single street or represent an entire municipality depending on the needs of each managing entity. The only necessary thing is that the sector has a place or several of water inlet and a place or more of water outlet. In a different way, the exploitations have a supply more linked to the territory and are made up of macrodmas and dmas.</p> <p>All the main elements of the project must be located both within a sector and a exploitation. As shown in image above, some are only related to the exploitation and only the subcatchments must be indispensable within a sector. In no case may an element be unrelated to any of the areas on the map.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#35-working-in-a-corporative-environment","title":"3.5 Working in a corporative environment","text":"<p>In an administration department or a company dedicated to water management the employees never work on the same issues nor, usually, a single employee oversees the entire water management process. As is normal, within the Giswater environment, a categorization can be done by different types of work based on the tables or views that one usually uses. Both Giswater and the PostgreSQL database allow the introduction of different work roles, to facilitate the use of the tools within a corporate environment where work is done simultaneously.</p> <p>The aim of roles is to improve security, preventing users without permission from modifying data likely to generate errors, as well as allowing a customization of some aspects of the project depending on each user with a different role.</p> <p>The roles available are:</p> <p>All roles with a higher hierarchy automatically acquire lower role permissions, that is why they are sorted according to the importance and permissions they have.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#36-default-values","title":"3.6 Default values","text":"<p>To facilitate the work of the users when inserting data in the different tables and views of the project, Giswater has the option of adding default values to parameters that are mandatory or highly recommended. Through different commands, when a new element is inserted that has fields which have related default values, they are automatically filled in with the established value. The value established by default must always be of the same type as the field to be filled, otherwise the insertion will be wrong.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#361-users-values","title":"3.6.1 User\u2019s values","text":"<p>User\u2019s default values are those that are managed through the config_param_user table. Usually, these values are used during the data insertion process.</p> <p>Within config_param_user you can add parameters and the values that the program will use by default when filling in the corresponding fields. A clear example of a default value that can be used would be the municipality, in case of having only one, the value of the muni_id field would automatically be that of the only existing municipality.</p> <p>The use of default values can greatly facilitate the insertion of new elements, but it is advisable to review all the values before definitely adding an element, as it is possible that some default value does not match the value that the inserted element should have. In the case of zones on the map, remember that the default value prevails over the geometry of the zone that Giswater automatically captures. For example, if a new element is going to be inserted within the perimeter of a sector=## 3, the program will capture that the sector would be ## 3, but if we have a default value sector=2, the element will be inserted with sector=2.</p> <p>From the Giswater plugin itself, you can also manage the default values, using the Configuration tool.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#362-system-values","title":"3.6.2 System values","text":"<p>The default system values are only modifiable by users with administration role. They are related to the configuration of tables and are usually used to manage the parameters of the different topological rules, which are described in the following section. Section 5.2.6 points out information with respect to the default system values, since they can be modifiable from the plugin Configuration tool.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#37-topology-rules","title":"3.7 Topology rules","text":"<p>The definition of geospatial topology says: \"The topology expresses the spatial relationships between characteristics of vectors (points, polylines and polygons) connected or adjacent in a GIS.\" Once the meaning is known, we will see some of the main topological characteristics that are important for the use of Giswater in its GIS branch.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#371-introducing-state-topology","title":"3.7.1 Introducing state topology","text":"<p>Before explaining the usual topological rules, it must be taken into account that Giswater has certain conditions in relation to the states of the elements, which we call state topology. In the following table you can see all the types of modifications (insert or update) between arc and node elements and if they can be carried out taking into account the state of the elements. Above the table you can see the different states available for the elements in Giswater:</p> <p>The state type that has the most restrictive conditions is Planified. Operating with elements in state = 2 is only possible for users with the role of masterplan or higher and it must be kept in mind that the management of these elements can break the topology.</p> <p>First, it is necessary to have at least one record in the plan_psector table, which is used to manage the planning. It is also essential to set a default value for psector. Arcs and nodes will be inserted with this default value in the specific tables: plan_arc_x_psector and plan_node_x_psector. It is important to check the state and doable fields.</p> <p>All elements, whether nodes or arcs, which have On service state and the user changes them manually to Planified, will be automatically introduced in the default psector that is currently available. Although this change is allowed by the topological rules, it should not be usual to pass a On Service element into Planified.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#372-arc-node-behavior","title":"3.7.2 Arc-node behavior","text":"<p>The correlations between arcs and nodes are probably the most important at the topological level within Giswater, partly because of the large number of elements that come into play. For the program to work properly, it is necessary to fulfill these topological rules. The program itself shows messages to the user when an important rule is about to be broken.</p> <p>The Giswater plugin has a specific tool that allows detecting certain topological errors related to the arcs and nodes. Later we will see how this tool is used, but in this section, we will explain the topological rules that are emphasized:</p> <ul> <li>Orphan nodes: nodes that are not connected to any arc.</li> <li>Duplicated nodes: nodes that are located exactly at the same place and that is why they produce  incoherence in the system.</li> <li>Topological consistency of nodes: there are some specific topological rules of Giswater, which consider the type of node. For example, there are types of nodes that must have connections with three different arcs, if not, they will be marked as erroneous.</li> <li>Arcs with the same start and end node: the arcs must always be placed between two different nodes (with different id), therefore, an arc that starts and ends at the same node is incorrect. This can be configured from the config table and the samenode_init_end_control field, where if we have the value TRUE the program will not allow arcs with the same start and end node; if we have FALSE, these arcs will be accepted.</li> <li>Arc without start or end node: Arcs disconnected from one of their ends.</li> </ul>"},{"location":"Markdownfiles/installation/Basic_work_rules/#373-link-behavior","title":"3.7.3 Link behavior","text":"<p>Link elements are graphical links between map elements. What a link does is connect an input element (connec or gully, also called connections in general) with an output element (arc, node, connec or gully).</p> <p>The attributes related to this graphic link are:</p> <ul> <li>Input element pjoint_id - Indetifier of the output element pjoint_type - Output element type arc_id - Identifier of the arc where the input element are finally conected with. If pjoint_type is ARC, pjoint_id and arc_id will be the same.</li> <li>Output element For WS arcs have a tab with their related input elements through arc_id. For UD, arcs have a tab with their related input elements. Nodes have a tab with their upstream related input elements.</li> <li>Link feature_id - Identifier of the input element feature_type - Input element type exit_id - Identifier of the output element exit_type - Output element type</li> </ul> <p>Special features</p> <ol> <li>Regarding its input element (which is upstream), the link shares most of its attributes: The visibility of the map, that is, exploitation and state, is taken from it. If the input element is deleted, the link is deleted (they are considered to be working as an integrated unit). The link attributes, such as length, diameter or material, are represented and manifested in the data model of the input element to which it belongs.</li> <li>Regarding its output element (which is downstream), there is no longer pertinence but simply topology, with which: If the output point is moved, the link is also moved. If the output point is moved to another arc, the arc_id field of the input element is automatically updated. If the output element is a connec or a gully, the arc_id value of the parent arc that has the output element is copied. The dma_id and fluid_type attributes of the output element are passed to both the link and the input element.</li> </ol> <p>For sanitation projects (UD) the dma_id and fluid_type attributes can be disconnected from the output element. To do this, the variables Connect autoupdate dma and Connect autoupdate fluid must be set to FALSE in the configuration.</p> <p>Ways to connect with links</p> <p>By default, when adding a connec or gully, it is disconnected from the network. For there to be a topology between the network and the connections, the links must be created. This can be done in the following ways:</p> <ol> <li>Manually draw the link. They can be drawn, with the geometry that you prefer, only when input element is connected to an output element, using the usual drawing tools in QGIS.</li> <li>Connect to network tool. Using the Giswater plugin tool explained in section 5.2.## 3.7, one or more connections can be connected at the same time. In this case, the link will always connect to the nearest arc in a straight line.</li> <li>Connect automatically. There are configuration variables so that, when a new connection is introduced, it automatically connects to the network. The result will be the same as if you connected using the plugin tool.</li> </ol> <p>In the connection forms there is a button (Set arc_id) that allows you to previously establish an arc_id. In case of doing so, the ways of connecting n\u00ba2 and ## 3 will result in the connection to the established arc and not to the one that is closest.</p> <p>State feature</p> <p>ON SERVICE and OBSOLETE</p> <ul> <li>There can only be one link with ON SERVICE state for a connection.</li> <li>There can be many links with OBSOLETE state for a connection.</li> <li>Mapzone, exit_id and exit_type value are copied from connection to link.</li> </ul> <p>PLANIFIED</p> <ul> <li>For every connection in a psector a new link is created. It can be generated manually or automatically.</li> <li>If the link is automatically generated, it could be modified in the alternative of the psector where we are working. The original link will never be modified.</li> <li>It is not allowed to delete the arc_id of a planified connection. The whole link must be deleted instead.</li> <li>Mapzone, exit_it and exit_type are showed with independence of the original connection, showing data which link and the planified conection has.</li> </ul>"},{"location":"Markdownfiles/installation/Basic_work_rules/#374-double-geometry-elements","title":"3.7.4 Double geometry elements","text":"<p>Giswater makes use of double-geometric elements. This means that a single element is formed by two different geometries, in this case they are always points that belong to a polygon.</p> <p>Only some of the elements of the network have this particularity, because they are types of elements that can have much larger measurements than those that are represented with a simple point and therefore it\u2019s interesting to visualize them as a polygon around the point.</p> <p>When adding a new node of one of the listed types, a square polygon will be immediately created around the point element. The main topological rules of this relationship are:</p> <ul> <li>If the node element is moved, the associated polygon will also move to the new position of the node.</li> <li>If a new polygon is drawn, with the perimeter that the user wants and around a node of the same type, the new perimeter directly replaces the old one.</li> <li>It\u2019s impossible to draw a new polygon without a node of the same type being inside it.</li> <li>If a node with double-geometry is deleted, the associated polygon will also be eliminated. On the other hand, the polygon can be deleted without modifying the node.</li> </ul> <p>To work with this type of double-geometric elements it is important to set a configuration that manages it. You can enable or disable this function in the config table, insert_double_geometry field. If it is enabled (recommended), the buffer_value field assigns a default value of the side length of the polygon square. As already said, this square can be edited to have the desired shape.</p>"},{"location":"Markdownfiles/installation/Basic_work_rules/#38-summary-of-work-rules-applied-to-the-insertion-of-a-node-element","title":"3.8 Summary of work rules applied to the insertion of a NODE element","text":"<p>To finish this section of basic work rules, an example scheme is presented to summarize all the work rules that need to be followed in the process of inserting a new node element. In the example scheme, the mandatory fields for insertion are defined and the steps to follow for the insertion to be correct can be viewed using arrows. The process is also shown in case insertion is not possible.</p> <p>Summary schema of the steps that need to be followed in the process of insertion of a node type element. The green lines represent successful steps; the red lines show the different scenarios in which the insertion will not be correct.</p> <p>The field the_geom is one of the most relevants and in this case one with the easiest rules to understand. When inserting a new element, the geometry of it must be placed inside the geometry of a sector, a dma and a exploitation, otherwise the insertion will be erroneous.</p> <p>If the state is 2, as mentioned recently, there must be at least one psector, otherwise the insertion will be incorrect. For elements with status \"on service\" (1), these must follow the topological rules explained in section ## 3.7.1.</p> <p>The other mandatory fields may have default values or being entered directly by the user. The hierarchies and foreign keys for the catalogs of elements must be respected, which means that trying to insert a node that does not belong to the catalogs, we won\u2019t succeed.</p>"},{"location":"Markdownfiles/installation/Necessary_software/","title":"Necessary Software","text":"<p>In this second section of the user\u2019s guide, you will find all the necessary steps that must be done before starting working in the Giswater environment, from the pre-installation requirements of the software\u2019s configuration, through the creation of new projects real or example), to test the functionalities of Giswater.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#21-necessary-software","title":"2.1 Necessary software","text":"<p>To start working with Giswater you must have at least ## 2 programs:</p> <ol> <li>PostgreSQL: The installation process must include the selection pgAdmin component (Data Base Manager) and Postgis application (Spatial Extension)</li> <li>QGIS: Geoprocessing Software</li> </ol> <p>PostgreSQL can be on our machine or on any server where we have access. QGIS, on the other hand, must always be installed in our machine.</p> <p>To download all the necessary software is recommended that you visit the Giswater webpage, where you can find the download links for the softwares and the compatible versions with the ultimate release of the Giswater plugin. </p> <p>DOWNLOADS</p>"},{"location":"Markdownfiles/installation/Necessary_software/#22-download-and-configuration-of-postgresql","title":"2.2 Download and configuration of PostgreSQL","text":"<p>PostgreSQL is an open-source database with enormous potential, which will be used to store all the data with which Giswater works. Thanks to its geospatial extension PostGIS allows an extremely comfortable relation with GIS, especially QGIS. This extension contains over 1000 geospatial functions, which makes it one of the most powerful GIS software available, although PostgreSQL is not a specific GIS program.</p> <p>We have at your disposal a collection of tutorial videos to help you get started:</p> <p>TUTORIALS</p> <p>There are different available versions to download. To work with Giswater a version within 10 and 16 is needed.</p> <p>In Github you can check the compatibility between PostgreSQL and Giswater versions.</p> <p>Version compatibility</p> <p>Step 1 Considering you already have QGIS installed, you must download PostgreSQL</p> <p>On the installation process make sure to install all its components. PgAdmin will be the user interface for the Data Base (DB) management. It will be used to manage the database and visualize it. PgAdmin also allows the user to modify the tables, views and rules of the database, as well as consult all the information and manage it.</p> <p>Further, you must create a password for the superuser, which will be necessary to access your pgAdmin for creating and managing a database and also to do a connection to the database from QGIS.</p> <p>PostgreSQL components</p> <p>PostgreSQL Password setting (same as used to enter in pgAdmin - DB manager)=</p> <p>Usual Port Number adopted</p> <p>PostGis extension installation (select a compatible version)</p> <p>In the installation process, habilitate the PostGis Extension</p> <p>PostGis Component.</p> <p>Once both programs are installed, after opening pgAdmin the first thing that needs to be done is add a new connection</p> <p>Step 2)      Create a Database for your projects on PostgreSQL using pgAdmin interface</p> <p>DB creation through the DB manager pgAdmin.</p> <p>\u26a0\ufe0f The DB name must not contain special characters or uppercase letters.</p> <p>Once the new connection is created, the first \u2018public\u2019 scheme is automatically created in a database. Next, the PostGIS extension must be added, to have all the GIS functionalities available, as well as the pgRouting extension, which adds routing and network analysis functionalities to the database. pgRouting will be essential for some of the Giswater tools such as the cutting polygon and the longitudinal profiles.</p> <p>By clicking the SQL command button, we can write our first query</p> <pre><code>CREATE EXTENSION postgis;\nCREATE EXTENSION pgrouting;\nCREATE EXTENSION tablefunc;\nCREATE EXTENSION unaccent;\n</code></pre> <p>\u26a0\ufe0f As of PostGIS version 3, it will also be necessary to add the specific extension to manage raster layers.</p> <pre><code>CREATE EXTENSION postgis_raster;\n</code></pre> <p>After those steps, its time to go back to QGIS and make a DB connection from QGIS to the just created DB using pgAdmin</p>"},{"location":"Markdownfiles/installation/Necessary_software/#23-configuration-of-qgis","title":"2.3 Configuration of QGIS","text":"<p>When opening QGIS for the first time, a series of parameters must be configured. They are necessary to work with Giswater:</p> <ul> <li> <p>Create a PostGIS connection to the database where the data schema is located</p> </li> <li> <p>To work comfortably and quickly with raster data, it is recommended to expand the cache memory of QGIS to 1GB and 1 year, through the menu 'Settings/Options/Network'.</p> </li> <li> <p>Choose open form if a single entity is selected</p> </li> </ul> <p>How to configure a new connection between QGIS and PostGIS?</p> <ol> <li>Click on the icon Add Postgis Layer</li> <li>Click over New and in the form introduce the connection parameters.  Connection form to PostGIS from QGIS. It allows to import layers from the database.</li> <li>Once the parameters are filled in click on Test Connection. If everything is correct the message will appear:</li> <li>Click OK. At this time, the connection information will be saved with the name on the connection list.</li> </ol> <p>\u26a0\ufe0f If we want to create new schemas with this connection, the user must be SUPERUSER on PostgreSQL.</p> <p>To use the Giswater plugin it is necessary to have created a connection to the database that we will use to work. It needs to be created once for each installed QGIS.</p> <p>Multiple connections to different databases are possible, although in this case it is recommended to work with caution to avoid mixing data between databases.</p> <p>Once connected we can visualize the tables (with and without geometry) that contain the corresponding database and, if necessary, add them to the project.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#24-downloading-and-first-steps-with-giswater-plugin","title":"2.4 Downloading and first steps with Giswater plugin.","text":"<p>In previous versions, Giswater was composed of an application, which acted as a driver for the configuration, creation, and management of the different projects on the database, and a plugin based on QGIS for the exploitation of network elements. Starting from version 3.## 2, it will only be necessary to install the plugin in QGIS to develop all the before mentioned functions.</p> <ul> <li> <p>In order to download the plugin, the URL of the repository is needed:</p> <p>The latest realease and repository\u2019s URL can be found on the Giswater website, where is also possible to access the older versions of the plugin.</p> </li> </ul> <p>DOWNLOADS, GISWATER</p> <p>From the downloads tab it\u2019s also possible to access the information about the product, the benefits of using open-source software, the expert\u2019s community who develop Giswater and get the materials and tutorials to learn how to use it.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#241-installing-the-plugin-in-qgis","title":"2.4.1 Installing the plugin in QGIS","text":"<p>To install and connect the Giswater plugin with QGIS, it\u2019s necessary to configure a new repository, which will allow viewing the Giswater plugin in the plugin list. For this we must follow the following steps:</p> <ol> <li>Open QGIS and access plugin repository (Plugins).</li> <li>Access the tab of Settings and add a new repository. To add the Giswater plugin to QGIS, look for it in the Plugins tab</li> <li>Introduce the name and identify the repository and URL. The repository is added manually, using a URL.</li> <li>Find and install Giswater plugin from the tab \u2018All\u2019.  We can always see the version of the plugin that we currently have installed and the version available in the repository.</li> </ol> <p>Warning: If we want to update the plugin to the most recent version, it can be done, but this may have implications that we will see later.</p> <p>The Giswater plugin tool should appear on the Plugins toolbar. If we do not have it activated, we will have to do it through View&gt; Toolbars&gt; Plugins.</p> <p>If, when installing the plugin for the first time with satisfactory results, the Giswater button in the Plugin toolbar does not automatically appear, we must close QGIS and open it again.</p> <p>In case of having more than one QGIS project open, the behavior of the plugin may present instabilities, so it is recommended not to use the plugin with more than one QGIS project opened.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#242-general-project-management-tool","title":"2.4.2 General project management tool.","text":"<p>This is the tool that a Giswater user should know while starting to work with it. Unlike the other buttons that the plugin incorporates, it is in the general toolbar next to the other buttons of different plugins installed or specific to QGIS.</p> <p>Most of the functionalities of this tool will only be executed if we open QGIS without any Giswater project (we understand by Giswater project a project that has at least the representation layers of nodes, arcs, connecs of a database schema).</p> <p>In case of initialization and the first steps with the plugin, we must know how to use this tool to perform all its functionalities:</p> <ul> <li>Generate new working schemas (directly in the database)</li> <li>Show the existing schemas</li> <li>Update and edit existing schemas</li> <li>Provide information about the selected schema</li> </ul> <p>\u26a0\ufe0f Only when the connection is using a SUPERUSER of PostgreSQL will be possible to create new schemas or update it.</p> <p>Main form of the general project management tool</p>"},{"location":"Markdownfiles/installation/Necessary_software/#251-creation-of-an-empty-schema","title":"2.5.1 Creation of an empty schema","text":"<p>Using the general tool of project management, that was just presented in section ## 2.4.## 2, we are going to create a basic template of the working scheme in the database, which can later be opened and edited as a QGIS project. By referring to an empty schema, it does not mean that there is no full data in the tables, but that the data of a specific network are not, however, we will find common and system values that any Giswater work schema must necessarily incorporate.</p> <p>The first thing we must keep in mind is that this tool, in its first drop-down list called Connection name will show all the PostGIS connections that are created in our QGIS. In section ## 2.3 of this manual, a connection with the name Giswater was created, so this connection appears as available in the tool (Image below). We will then have to consider the connection parameters that we have given in order to know which database the tool will attack and therefore where we are going to generate the new template.</p> <p>Knowing which database calls the connection, click Create to open the configuration form for the new work scheme.</p> <p>Schema creation form. With Empty data selected, we will create an empty schema.</p> <p>After clicking Accept, the schema will be created, and the program will let us know about its status: We can also see in the database, through pgAdmin, that the manual_ws schema has appeared with the functions, sequences, tables, triggers, and views that contains a Giswater template for supply networks.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#2511-basic-configuration-of-an-empty-schema","title":"2.5.1.1 Basic configuration of an empty schema","text":"<p>There are many types of tables within all those created in the previous section. There are some that are already filled by default, others that will be filled in as elements of the network are created and there are tables that can be customized by the users, depending on their needs and those of their network.</p> <p>The basic tables that match the main generic elements of any Giswater project are of great importance and must be considered in order to explain this section. They are the following:</p> <ul> <li>Arc</li> <li>Node</li> <li>Connec</li> <li>Gully (only for UD) These four tables are empty and will only be filled when our project has geospatial elements of the corresponding type, but they have certain restrictions when filling them and relationships with other tables that must be met.</li> </ul> <p>For any user who wants to customize the types of elements, a consult to a pretended table should be done and modify according to their liking.</p> <ul> <li>cat_feature This table serves as a catalog for all items of the various types. In any created scheme we will already find values, but we can easily change names, add or delete rows.</li> </ul> <p>Each element that exists in cat_feature must be part of an element type (feature_type), which can be NODE, ARC, CONNEC or GULLY, and in addition to another type within each of the previous ones, specified in the sys_feature_type table (not modifiable by users).</p> <p>Each user can customize the cat_feature table with specific elements that are necessary for their network, as long as these are related to one of the fields of sys_feature_type (for example, TANK or FOUNTAIN) and with one of the existing feature_type.</p> <p>In a lower order of hierarchy of tables that determine the existing elements, we find the catalog tables (see section 4.## 2.1.1), which must be filled in by relating each new element, with a name to suit the user, with any of the existing ones in cat_feature.</p> <ul> <li>cat_node</li> <li>cat_arc</li> <li>cat_connec</li> <li>cat_grate (UD)</li> </ul> <p>If in these last catalogs you want to add values for the material columns, it will also be necessary to previously fill in material catalogs:</p> <ul> <li>cat_mat_arc</li> <li>cat_mat_node</li> </ul> <p>Then there are other interesting tables for adding custom value domains:</p> <ul> <li>man_type_category</li> <li>man_type_fluid</li> <li>man_type_function</li> <li>man_type_location</li> </ul> <p>In these tables we can add specific information about the type of category, fluid, function or location related to the different types of basic elements (arc, node, connec, gully). Each of the tables has the following fields:</p> Field Name Type Description <code>id</code> <code>serial</code> Numeric auto identification (primary key) <code>*_type</code> <code>varchar(50)</code> Field to put our information that will be used in the arc / node / connec / gully tables <code>feature_type</code> <code>varchar(30)</code> Type of element to which the value is assigned <code>featurecat_id</code> <code>varchar(30)</code> It allows us to detail more in each of the large categories <code>observ</code> <code>varchar(150)</code> To add additional information <p>*category/fluid/function/location</p> <p>To give an example of the use of these tables, we could define a domain catalog of custom values for a tank (deposit) in addition to the one that would correspond to it for node.</p> <p>For information purposes, but it is important to know, these fields are managed by the database using foreign keys to guarantee the consistency and uniqueness of the information. As you can already guess, the foreign key has special characteristics to govern this system of different values depending on the source table. One of the most important characteristics is the duplication of the foreign key.</p> <p>This means that, to give an example for the node table, and regarding the type of fluid, the double key is managed in such a way that only those values of fluid_type in the man_fluid_type table that meet the condition will be available in the node.fluid_type field. that have the field feature_type = 'NODE'. </p> <p>This double foreign key guarantees that the information is consistent at all times, avoiding insertions that do not meet this criteria and propagating changes in the event of renewing or deleting value domains.</p>"},{"location":"Markdownfiles/installation/Necessary_software/#252-creation-of-a-sample-schema-sample","title":"2.5.2 Creation of a sample schema (sample)","text":"<p>To facilitate the first steps with Giswater and have a complete data model that serves as a reference source, Giswater has incorporated two example schemes, for both urban drainage and water supply networks.</p> <p>Having a first complete data model, apart from serving as a query source to see how the data is structured within each of the tables, will allow to start with a test environment and practice all the features that the Giswater plugin contains.</p> <p>In order to create the sample, repeat the previous steps of creating an empty schema, explained in the section ## 2.5.1., but when the time comes to create the schema, you will have to select Example data instead of Empty data.</p> <p>We will automatically have a Giswater sample project created with all kinds of information and sample data to see its functionality at maximum performance. With the giswater 3.## 2 plugin, the example schema can be given whatever name the user wants, unlike previous versions where the name was necessarily ws_sample and ud_sample.</p> <p>Create new schema form. By selecting Example data we will create the sample schema</p>"},{"location":"Markdownfiles/installation/Necessary_software/#253-creation-of-schema-importing-a-previous-inp-file","title":"2.5.3 Creation of schema importing a previous \".inp\" file","text":"<p>Another possibility is, if you already have a \".inp\" EPA file, you can also create a schema using your previous model data. This functionality is still in Beta mode, which means it is still being developed, so may occur some troubleshooting when trying to do so. In this case, we will be happy to help you! </p>"},{"location":"Markdownfiles/installation/Necessary_software/#254-creation-of-qgis-projects","title":"2.5.4 Creation of QGIS projects.","text":"<p>With the general project management tool, apart from creating the schemas within the database, we also can automatically generate projects for QGIS, specifically designed to work with database tables, as well as designed with symbology that allows the project data to be viewed in the most comfortable way possible.</p> <p>To create these Giswater project templates, we must click on the Create GIS project button in the initial form of the tool.</p> <p>General project management form. With the Create GIS Project button we obtain a project template in QGIS. In the small form that will be opened next, we must choose the type of project that we are going to create based on a role. Later in this manual (section 3.5) it will be explained which are the roles that Giswater manages, as well as their characteristics and properties, but for now all we need to know is that the number of layers loaded in the project will be different depending on the role that we choose and, in the same way, the number of functionalities that we can carry out with the plugin will also be modified.</p> <p>We recommend that, for users who do not use Giswater in a corporate environment, they always choose the admin role to enjoy all the plugin's features.</p> <p>During the creation of the GIS project, we must also choose a name for the qgs file and a folder where to save it.</p> <p>Finally, if we want this project to be opened without having to enter the access credentials to the database, we have the possibility to mark Export user password, so that the created file will directly store these credentials and we can open it without having to enter user and password.</p> <p>By clicking Accept, the file will be created, and we will be ready to open it.</p> <p>We must bear in mind that, when creating a GIS project:</p> <ul> <li>For an empty schema we will not see anything inside the QGIS map, and we will have to manually add the data. If what we want is to start drawing our network and enter data from scratch, we will have to follow some specific steps, as there are certain mandatory work rules that will be discussed throughout this manual. In section 6 we will find a brief practical guide on how to digitize a network starting from scratch.</li> <li>For an example scheme we will directly have a network with all the data filled in to be able to test the functionalities of the plugin.</li> <li>You can also try to import a .inp file from an existing EPA hydraulic  model , to see how it looks in GISWATER, for this we advice you to take a look on  Import inp file debug mode on GitWiki for more info.</li> </ul>"},{"location":"Markdownfiles/introduction/Introduction/","title":"Introduction","text":""},{"location":"Markdownfiles/introduction/Introduction/#11-preamble","title":"1.1 Preamble","text":"<p>Welcome to Giswater, the first open-source software for water cycle management (water supply and urban drainage).</p> <p>The software has been licensed under the GNU-GLP 3 License. </p> <p>The following document is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License. </p> <p>This user\u2019s guide aims to help you start working with Giswater.</p>"},{"location":"Markdownfiles/introduction/Introduction/#12-what-is-giswater","title":"1.2 What is Giswater?","text":"<p>Giswater is an open-source application for management and exploitation of hydraulic infrastructure elements in both water supply and urbain drainage. It is accessible using database and graphic representation using any kind of geographic information system (GIS).</p> <p>At the same time, Giswater can act as a driver connecting spatial database with tools used for hydraulic analysis. Currently Giswater is on the third version of the software, which represents notable improvements comparing with previous versions, not only graphically but also in usability and capabilities.</p> <p>As presented on this image , Giswater is located between the applications, which used all together allow a solid and global management in relation to water supply and urban drainage models. The central element of the set is the database, where all the information and most of the functionalities of each Giswater project is located. Giswater uses PostgreSQL database, which together with its PostGIS extension allows to conveniently link it with the next application of the set: QGIS.</p> <p></p>      Application schema used by Giswater, centralized in the database.  <p>This geographic information system software has been based the development of the Giswater project, in its visual branch and with greater operability by the user. QGIS is related through PostGIS to the database, showing organized spatial data and always considering all the rules, relationships and processes established in the database.</p> <p>The central point of the project (Database - GIS) also allows to connect with SCADA, to update in real time, the information that comes directly from the physical elements of the network. In this way, Giswater is also a global management system that allows its users to always work with data that is updated automatically. Apart from the data management through GIS software there is also the possibility of working with Giswater data in web and mobile environment. This functionality is separate from the usual desktop use, since it is only for customers that require it.</p>"},{"location":"Markdownfiles/introduction/Introduction/#13-what-is-the-goal-of-this-users-guide","title":"1.3 What is the goal of this user\u2019s guide?","text":"<p>The most important goal of this guide is to provide the user a document which will help to carry out any task with Giswater, from the initial installation process of the necessary programs to the most complex management operations. The improvements made in the version 3 will be reflected throughout the manual and the purpose of those improvements, together with the instructions of how to make use of them, will be explained in the best possible way.</p> <p>Furthermore, on the Github Wiki page there are more specific information about the plugin, with a greater technical focus:</p> <p>Click Here</p>"}]}